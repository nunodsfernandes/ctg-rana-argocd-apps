---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: chime-optimizer
  namespace: argocd99
  finalizers:
    - resources-finalizer.argocd.argoproj.io
spec:
  destination:
    namespace: chime99
    server: https://kubernetes.default.svc
  project: default
  syncPolicy:
    syncOptions:
      - CreateNamespace=true
  source:
    chart: chime
    repoURL: https://cwops.jfrog.io/artifactory/api/helm/qcomm-helm
    targetRevision: 1.2.63-ocp
    helm:
      releaseName: chime
      values: |

        createMongoExternalService: false
        createMysqlExternalService: false
        createVerticaExternalService: true

        mysqlFillOssTabls: false
        cifsSecrets: false
        devspaceCreateDevFolders: true
        dbChangeLogCheckerEnabled: false

        global:
          # ingressClassName: nginx - no need in openshift

          localNodeTimezone: false
          timezone: "Europe/Paris"

          imagePullSecrets:
            - regcred

          ## Global Image version
          imageVersion: chime_release_hpe.9

          #for nfs mount
          shareTarget: nfs
          networkPathPrefix: /mnt/nfs_shares/data
          nfsServer: 172.16.245.104

          createMongoDbSecret: true
          mongoSecretName: "cw-mongo"
          mongoHosts: "10.0.168.163:27017"
          # Change to primary due to policy-studio
          mongoAuthenticationDatabase: "admin"
          mongoUserName: "rana-chime"
          mongoPasswordHash: "E55UkRdKFg3qk80paER7LQ=="
          mongoDbName: "chimemng"
          #mongoDbReplName: "rs0" # useful only when using replica-set mongodb
          mongoPassword: rana-chime123
          mongoDbRepl: false # true when using replica-set mongodb

          createVerticaDbSecret: true
          verticaSecretName: "cw-vertica"
          verticaHost: "10.0.232.143:5433"
          verticaBackupHost: "10.0.232.143:5433"
          verticaMoHost: "10.0.232.143:5433"
          verticaMoBackupHost: "10.0.232.143:5433"
          verticaUserName: "dbadmin"
          verticaHashPassword: "aAgBzKix72jR2axQvDloDw=="
          verticaSchema: "sonpm"
          verticaMoSchema: "sonpm"
          verticaPassword: "counters123" 


          createMysqlDbSecret: true
          mysqlSecretName: "cw-mysql"
          mysqlHost: "saas-cellwize-db.czyginzkctfg.us-east-2.rds.amazonaws.com"
          mysqlUserName: "admin"
          mysqlHashPass: "kirNE26kXPUqmNpMMhGHMA=="
          mysqlDbName: "saas-cellwize-db"
          mysqlUrlSuffix: "&serverTimezone=Europe/Paris&useSSL=false"

          createActivemqDbSecret: true
          activemqSecretName: "cw-activemq"
          activemqHosts: "tcp://activemq:61616"
          activemqUsername: "admin"

          kafkaHosts: "kafka-headless.intam"
          kafkaPort: "9092"
        
          jmxExporterJarImage: "cellwizeplatform/jmxexporter_jar:0.15.0"
          jmxJarPath: "/opt/jmx/jmx_prometheus_javaagent-0.15.0.jar"
        
        sonopskafkapublisher:
          enabled: true
          ingress:
            hosts:
              - sonopskafkapublisher.{{ .Values.ingressSuffix }}
            path: /sonopskafkapublisher
            annotations:
              route.openshift.io/termination: edge
            tls: [] # for openshift
      
          properties: |
            
            #activeMQ configuration
            activemq.broker.url=tcp://amq-activemq:61616
            activemq.broker.username=admin
            activemq.broker.password=admin
            
            
            activemq.supportedEvents= RECIPE_START, RECIPE_STEP_COMPLETED, RECIPE_COMPLETED, TASK_TRIGGERING_STATUS, ENTITY_CREATED, CONTEXT_STATUS, NEW_CELL_ADDED,NEW_CELL_FOUND, PROV_GTW_WORK_ORDER_EVENT
            
            
            kafka.topic.RECIPE_START=RECIPE_STATUS
            kafka.topic.RECIPE_STEP_COMPLETED=RECIPE_STATUS
            kafka.topic.RECIPE_COMPLETED=RECIPE_STATUS
            kafka.topic.TASK_TRIGGERING_STATUS=TASK_TRIGGERING_STATUS
            kafka.topic.ENTITY_CREATED=ENTITY_CREATE_STATUS
            kafka.topic.CONTEXT_STATUS=CONTEXT_STATUS
            kafka.topic.NEW_CELL_ADDED=NEW_CELL_STATUS
            kafka.topic.NEW_CELL_FOUND=NEW_CELL_STATUS
            kafka.topic.PROV_GTW_WORK_ORDER_EVENT=wo-event
            
            kafka.addVesEnvelope=false
            
            kafka.address=kafka-headless.intam:9092

        contextual-service:
          enabled: true
          ingress:
            hosts:
              - contextual-service.{{ .Values.ingressSuffix }}
            path: /contextual-service
            annotations: 
              haproxy.router.openshift.io/ip_whitelist: "{{ .Values.ipWhitelist }}"
              route.openshift.io/termination: edge
            tls: [] # for openshift

          properties: |
            
            #VES consumer#
            kafka.consumer.ves.isActive=false
            
            #New Cell Events consumer#
            kafka.consumer.newcellevent.topic.names=NEW_CELL_DEPLOYMENT
            kafka.consumer.newcellevent.isActive=true
            
            
            #Du Events consumer#
            kafka.consumer.du.topic.names=DU_CREATE
            kafka.consumer.du.isActive=true
            
            
            #DuCell Events consumers#
            kafka.consumer.duCell.topic.names=DU_CELL_CREATE
            kafka.consumer.duCell.isActive=true
        
            kafka.consumer.address=kafka-headless.intam:9092
            kafka.producer.address=kafka-headless.intam:9092
        
            kafka.producer.newCellRetry.topic=CONTEXT_NEW_CELL
            kafka.producer.duRetry.topic=CONTEXT_DU_CREATE
            kafka.producer.duCellRetry.topic=CONTEXT_DU_CELL_CREATE
            
            ###Active MQ properties###
            activemq.broker.url=tcp://amq-activemq:61616
            activemq.broker.username=admin
            activemq.broker.password=admin
            activemq.broker.queue.name=newSiteContextQueue
            
            naas.url= naas.url=http://chime-naas:9091
            
            
            #MySQL
            spring.datasource.url=jdbc:mysql://saas-cellwize-db.czyginzkctfg.us-east-2.rds.amazonaws.com:3306/son?rewriteBatchedStatements=true
            spring.datasource.username=admin
            spring.datasource.password=kirNE26kXPUqmNpMMhGHMA==
          
        task-trigger-service:
          enabled: true
          ingress:
            hosts:
              - task-trigger.{{ .Values.ingressSuffix }}
            path: /task-trigger
            annotations:
              route.openshift.io/termination: edge
            tls: [] # for openshift
          properties: |
        
            # need to configure mongo connectivity
            db.main.mongo.hosts=10.0.168.163:27017
            db.main.mongo.username=rana-chime
            db.main.mongo.password=E55UkRdKFg3qk80paER7LQ==
            db.main.mongo.name=chimemng
            
            # the wlm url (including /wlm at the end)
            wlm.url=http://chime-wlm:9090/wlm
            
            #New Cell Events consumer#
            task.trigger.kafkaConsumer.newcellevent.isActive=true
            task.trigger.kafkaConsumer.newCellContext.topic=CONTEXT_NEW_CELL
            
            #Du Events consumer#
            task.trigger.kafkaConsumer.du.isActive=true
            task.trigger.kafkaConsumer.du.topic=CONTEXT_DU_CREATE

            #DuCell Events consumers#
            task.trigger.kafkaConsumer.duCell.isActive=true
            task.trigger.kafkaConsumer.duCell.topic=CONTEXT_DU_CELL_CREATE
            
            task.trigger.kafkaConsumer.address=kafka-headless.intam:9092
            
            task.trigger.newCell.kafkaConsumer.group.id=triggeringService
            
            operreporting.sender.threadPoolSize=8
            operreporting.sender.allowedEventMessageTypes=TASK_TRIGGERING_STATUS

        wlm:
          serviceMonitorEnabled: true
          jmx:
            enabled: false
          enabled: true
          ingress:
            hosts:
              - wlm.{{ .Values.ingressSuffix }}
            path: /wlm
            annotations: 
              route.openshift.io/termination: edge
            tls: [] # for openshift
            
          resources:
            requests:
              cpu: 1
              memory: 2Gi
            limits:
              cpu: 4
              memory: 4Gi
          env:
            spring.datasource.username: "admin"
          ##WLM PROPERTIES
          properties: |
            springfox.documentation.swagger.v2.path=/api-docs

            spring.jpa.hibernate.ddl-auto=validate

            liquibase.enabled=true
            liquibase.change-log=classpath:db/changelog-wlm-master.xml

            jobs.execute-on-startup=true
            jobs.schedule-on-startup=true

            wlm.executiongroups.enabled=false

            wlm.queued-instances-checking.enabled=true
            wlm.queued-instances-checking.interval=60
            wlm.queued-instances-checking.timeout=3600

            wlm.server-availability-checking.enabled=true
            wlm.server-availability-checking.interval=30
            wlm.server-availability-checking.timeout=600

            activemq.queue.developer.tasks.name=developer.tasks.queue

            logging.level.org.hibernate.SQL=DEBUG
            logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE


        xpaas:
          serviceMonitorEnabled: true
          jmx:
          enabled: true
          #swaggerBaseUrl: "apim.{{ .Values.ingressSuffix }}/gateway"
          #swaggerTokenUrl: "https://am.{{ .Values.ingressSuffix }}/gateway/chime/oauth/token/"
          maxRamPercentageForHeap: '85.0'
          resources:
            requests:
              cpu: 200m
              memory: 1Gi
            limits:
              cpu: 2
              memory: 2Gi
          ingress:
            hosts:
              - xpaas.{{ .Values.ingressSuffix }}
            annotations:
              route.openshift.io/termination: edge
            tls: [] # for openshift

          #XPAAS PROPERTIES
          properties: |
            naas.retry.count=3
            naas.retry.interval=1500
            naas.timeout=150000

            spring.datasource.tomcat.test-on-borrow=true
            spring.datasource.tomcat.validation-query=SELECT 1
            spring.datasource.tomcat.validation-interval = 30000

            springfox.documentation.swagger.v2.path=/api-docs
            spring.jackson.date-format=com.cellwize.xpaas.RFC3339DateFormat
            spring.jackson.serialization.WRITE_DATES_AS_TIMESTAMPS=false
            spring.jackson.default-property-inclusion=NON_NULL

            management.metrics.export.influx.enabled=false
            management.metrics.export.influx.uri=http://localhost:8086
            management.metrics.export.influx.db=xpaas
            management.metrics.export.influx.step=5s
            management.metrics.distribution.percentiles-histogram[http.server.requests]=true
            management.metrics.distribution.percentiles[http.server.requests]=0.95,0.99
            management.metrics.distribution.sla[http.server.requests]=10ms,100ms

            kafka.address=kafka-headless.intam:9092

            xpaas.kpi.definition-service=dynamic
            xpaas.kpi.formula.verify-counters=false
            xpaas.kpi.populate-on-startup=true

            xpaas.pageinationLimit.max=2500
            xpaas.pageinationLimit.default=300

            # Enable compression
            server.compression.enabled=true
            server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
            server.compression.min-response-size=1024

            counters.isQueryFromUnifiedTable=true

        aad:
          serviceMonitorEnabled: true
          jmx:
            enabled: false
          #swaggerBaseUrl: "apim.{{ .Values.ingressSuffix }}/gateway"
          #swaggerTokenUrl: "https://am.{{ .Values.ingressSuffix }}/gateway/chime/oauth/token/"
          enabled: true
          maxRamPercentageForHeap: '85.0'
          resources:
            requests:
              cpu: 200m
              memory: 1Gi
            limits:
              cpu: 2
              memory: 2Gi
          ingress:
            hosts:
              - assessment.{{ .Values.ingressSuffix }}
            path: /ngd
            annotations: 
              route.openshift.io/termination: edge
            tls: [] # for openshift
        
          #ASSESSMENT PROPERTIES
          properties: |
            server.port=8095
            server.servlet.contextPath=/ngd

            activemq.broker.url=tcp://activemq:61616
            activemq.broker.username=admin
            activemq.broker.password=admin
            activemq.queue.tasks.name=tasks.queue

            wlm.url=http://chime-wlm:9090/wlm
            xpaas.url=http://chime-xpaas:9092/xpaas

            activemq.queue.assessment.name=assessment.events;
            activemq.topic.assessment.events=VirtualTopic.assessment.events
            activemq.queue.provision.events.queue=Consumer.AAD.VirtualTopic.PROV_ACTION_EVENT

            activemq.broker.sonactions.url=tcp://activemq:61616
            activemq.broker.sonactions.username=admin
            activemq.broker.sonactions.password=admin

            activemq.queue.prefetch=1000
            activemq.broker.sonactions.concurrency=1-20
            activemq.broker.constraints.concurrency=1-10
            activemq.broker.scheduler.concurrency=1-10
            activemq.broker.statuses.concurrency=1-10
            assessment.sender.threadPoolSize=10

            #assessment jobs batching window in minutes
            assessment.batching.window=10
            assessment.batching.size=1000
            assessment.kpis.offset=120

            #Caffeine
            caffeine.expire.strategy=expireAfterAccess
            caffeine.expire.time=1h
            caffeine.params=softValues
            spring.cache.cache-names=AssessmentRulesCache

            spring.datasource.tomcat.test-on-borrow=true
            spring.datasource.tomcat.validation-query=SELECT 1
            spring.datasource.tomcat.validation-interval = 30000
            springfox.documentation.swagger.v2.path=/api-docs

            spring.liquibase.change-log=classpath:db/changelog-aad-master.xml

            assessment.constraints.type=opt
            assessment.blackout.period=48

        naas:
          serviceMonitorEnabled: true
          serviceMonitor:
            - name: kube-prometheus-chime-jmx
              endpointsPath: '/'
              port: 'jmx'
              interval: 60s

          jmx:
            enabled: false
          #swaggerBaseUrl: "apim.{{ .Values.ingressSuffix }}/gateway"
          #swaggerTokenUrl: "https://am.{{ .Values.ingressSuffix }}/gateway/chime/oauth/token/"
          enabled: true
          ingress:
            hosts:
              - naas.{{ .Values.ingressSuffix }}
            path: /naas
            annotations: 
              route.openshift.io/termination: edge
            tls: [] # for openshift

          resources:
            requests:
              cpu: 2
              memory: 2Gi
            limits:
              cpu: 4
              memory: 4Gi
        
          ##NAAS PROPERTIES
          properties: |
            
            activemq.broker.sonactions.concurrency=1-20
            activemq.broker.sonactions.maxMessagesPerTask=100
            activemq.broker.sonactions.exclusiveConsumer=false

            springfox.documentation.swagger.v2.path=/api-docs

            spring.jpa.hibernate.ddl-auto=validate
            spring.jpa.hibernate.naming_strategy=org.hibernate.cfg.EJB3NamingStrategy
            hibernate.ejb.naming_strategy=org.hibernate.cfg.EJB3NamingStrategy

            liquibase.enabled=true
            liquibase.change-log=classpath:db/changelog-naas-master.xml

            spring.batch.job.enabled=false

            spring.jpa.properties.hibernate.ejb.interceptor=com.cellwize.persistence.SerializedJSONFieldInterceptor

            activemq.topic.naas.events=VirtualTopic.naas.events
            activemq.queue.provision.events.queue=Consumer.NAAS.VirtualTopic.PROV_ACTION_EVENT
            son.events.applied.in.offline.mode=false
            #Several kafka brokers can be set like so: ip1:port1,ip2:port2,ip3:port3

            kafka.address=kafka-headless.intam:9092

            caffeine.expire.strategy=expireAfterAccess
            caffeine.expire.time=120s
            caffeine.params=softValues

            spring.hateoas.use-hal-as-default-json-media-type=false

            # Enable compression
            server.compression.enabled=true
            server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
            server.compression.min-response-size=1024

            spring.application.name=naasService

            naas.kafka.isActive=false

            naas.changeevent.kafka.isActive=false
            naas.kafkaConsumer.changeevent.topic=naas.kafkaConsumer.changeevent.topic
            naas.chgEvents.kafkaConsumer.group.id=${naas.kafkaConsumer.group.id}
            naas.batching.sourceId.interval.minutes=10
            naas.cnl.triggering.interval.milliseconds=600000
            naas.cnl.triggering.batch.size=
            naas.cnl.triggering.lock.duration=2


            pageinationLimit.max=2500
            pageinationLimit.default=300

            naas.kafkaConsumer.ves.allowedCellTypes=CELL,LNCEL,NRCELL,NRDUCELL
            naas.kafkaConsumer.ves.allowedCellParamKeys=cellName,CELLNAME,NRDUCELLNAME


            naas.batching.vertica.interval.milliseconds=1000
            naas.batching.mongo.interval.milliseconds=1000

            operreporting.sender.enabled=false
            operreporting.sender.threadPoolSize=8
            operreporting.sender.allowedEventMessageTypes=
            operreporting.newCellStatusSonOpsReporter.enabled=false

            # naas.index.allocation.expire.minutes=60
            # naas.index.allocation.lock.duration=2

            # Geo Impact properties
            # geoImpact.NRCellSize.lowBand=500
            # geoImpact.NRCellSize.midBand=500
            # geoImpact.NRCellSize.highBand=100
            # geoImpact.NRCell.circleOffset.lowBand=288.7
            # geoImpact.NRCell.circleOffset.midBand=288.7
            # geoImpact.NRCell.circleOffset.highBand=57.7
            # geoImpact.BiDirectionalDNNModeling=false
            # geoImpact.facingAzimuth.extraAttenuationPow=2
            # geoImpact.facingAzimuth.extraAttenuation=10
            # geoImpact.NRCell.forcedRadius=-1
            # geoImpact.LTECell.forcedRadius=100
            # geoImpact.searchRadius.urban=5000.0
            # geoImpact.searchRadius.rural=10000.0
            # geoImpact.omniAntennaGain=5
            # geoImpact.trainedGain=17
            # geoImpact.decomp.offsets.lowBand=5,10,15,20,30
            # geoImpact.decomp.offsets.midBand=5,10,15,20,30
            # geoImpact.decomp.offsets.highBand=5,10,15,20,30
            # geoImpact.decomp.threshold.lowBand=0.95
            # geoImpact.decomp.threshold.midBand=0.95
            # geoImpact.decomp.threshold.highBand=0.95
            # geoImpact.norm.offsets.lowBand=-45,-40,-35,-30,-25,-20,-15,-10,-5,0,5,10,15,20,25,30,35
            # geoImpact.norm.offsets.midBand=-45,-40,-35,-30,-25,-20,-15,-10,-5,0,5,10,15,20,25,30,35
            # geoImpact.norm.offsets.highBand=-45,-40,-35,-30,-25,-20,-15,-10,-5,0,5,10,15,20,25,30,35
            # geoImpact.basePower=-85

            naas.neuralEngine.batchSize=250

            geoImpact.NRCellSize.midBand=100
            geoImpact.NRCell.circleOffset.midBand=57.7



        policy-studio:
          enabled: true
          readinessProbe: false
          resources:
            requests:
              cpu: 200m
              memory: 6Gi
            limits:
              cpu: 2
              memory: 16Gi

          image:
            tag: chime_release_hpe.2
          mongoSchema: pls-chimemng
          #mongoReplName: rs0 # uncomment when using replica-set mongodb
          env:
            PS_PUBLISH_API: "http://chime-pls:8090"
            NODE_TLS_REJECT_UNAUTHORIZED: '0'
            NODE_OPTIONS: --max_old_space_size=16384
          ingress:
            hosts:
              - policy-studio.{{ .Values.ingressSuffix }}
            annotations: 
              route.openshift.io/termination: edge
            tls: [] # for openshift
        pls:
          javaActiveProfiles: "messaging,NAAS,newMOL,newNL"
          serviceMonitorEnabled: true
          jmx:
            enabled: false
          enabled: true
          maxRamPercentageForHeap: '75.0'
          resources:
            requests:
              cpu: 500m
              memory: 2Gi
            limits:
              cpu: 2
              memory: 4Gi
          ingress:
            hosts:
              - pls.{{ .Values.ingressSuffix }}
            path: /pls
            annotations: 
              route.openshift.io/termination: edge
            tls: [] # for openshoft
        
          ##PLS PROPERTIES
          properties: |

            spring.jpa.hibernate.ddl-auto=validate
            server.connection-timeout=1000000
            spring.jpa.show-sql=false
            spring.jpa.properties.hibernate.format_sql=true
            liquibase.enabled=true
            liquibase.change-log=classpath:db/changelog-pls-master.xml
            springfox.documentation.swagger.v2.path=/api-docs
            spring.http.multipart.location=/tmp/
            policyservice.moqueries.folderLocation=/opt/policy_service/uploaded/
            policyservice.bits.folderLocation=/opt/policy_service/uploaded/
            io.zip.password=aiGk7XgV07k6Soh6Kue6rA==
            io.zip.compression=5
            io.zip.encryption=0
    
        pgw:
          serviceMonitorEnabled: true
          jmx:
            enabled: false
          enabled: true
          #swaggerBaseUrl: "apim.{{ .Values.ingressSuffix }}/gateway"
          #swaggerTokenUrl: "https://am.{{ .Values.ingressSuffix }}/gateway/chime/oauth/token/"
          replicaCount: 1
          javaActiveProfiles: "NAAS,newMOL,newNL"
          maxRamPercentageForHeap: '85.0'
          resources:
            requests:
              cpu: 200m
              memory: 1Gi
            limits:
              cpu: 2
              memory: 2Gi
          ingress:
            hosts:
              - pgw.{{ .Values.ingressSuffix }}
            annotations: 
              haproxy.router.openshift.io/ip_whitelist: "{{ .Values.ipWhitelist }}"
              route.openshift.io/termination: edge
            tls: [] # for openshift

          ##PGW PROPERTIES
          properties: |
            springfox.documentation.swagger.v2.path=/api-docs
            spring.jackson.date-format=com.cellwize.provgateway.RFC3339DateFormat
            spring.jackson.serialization.WRITE_DATES_AS_TIMESTAMPS=false

            son.events.applied.in.offline.mode=false

            pgw.sonTaskStatus.expire.hours=48
            pgw.provResponse.timeout.min=15

            pgw.sonactions.queue.queue.prefetch.size=10
            pgw.sonactions.queue.concurrency=1-10
            pgw.sontaskstatus.queue.queue.prefetch.size=15
            pgw.sontaskstatus.queue.concurrency=1-5
            pgw.assessmentdecisions.queue.prefetch.size=5
            pgw.assessmentdecisions.queue.concurrency=1-1

            pgw.batch.size=10000
            pgw.batch.timeout=10000
            pgw.lock.duration=2
            pgw.sim.job_id.pci=
            pgw.sim.job_id.nr_pci=
            pgw.sim.job_id.rsi=
            pgw.sim.job_id.nr_rsi=
            pgw.sim.job_id.lte_intra=
            pgw.sim.job_id.lte_inter=
            pgw.sim.job_id.generic=
            pgw.sim.job_id.gsm_anr=
            pgw.sim.job_id.sho=
            pgw.sim.job_id.nr_anchoring=
            pgw.oper.job_id.rsi=
            pgw.oper.job_id.nr_rsi=
            pgw.oper.job_id.lte_intra=
            pgw.oper.job_id.lte_inter=
            pgw.oper.job_id.nr_anchoring=
            pgw.oper.job_id.generic=
            pgw.oper.job_id.pci=
            pgw.oper.job_id.nr_pci=
            pgw.oper.job_id.gsm_anr=
            pgw.oper.job_id.sho=

            pgw.workorder.observer.interval.steps.milliseconds=30000,60000,120000,180000
            pgw.workorder.observer.interval.steps.repetition=4
            pgw.workorder.observer.queue.interval.delay.threshold=1000
            pgw.workorder.observer.queue.concurrency=1-5
            pgw.workorder.observer.queue.prefetch.size=10
            pgw.workorder.queue.name=pgw.activeWorkOrders

            #Provisioning mode - SIM or OPER
            pgw.prov_mode=SIM

            pgw.provFolder=./opt-server/runtime/provisioning

            spring.hateoas.use-hal-as-default-json-media-type: false

            kafka.address=kafka-headless.intam:9092

            rest.timeout=10000
            aadmn.timeout=1000

            spring.jpa.hibernate.ddl-auto=none
            spring.jpa.hibernate.naming.implicit-strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl
            spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

            operreporting.sender.enabled=false
            operreporting.sender.threadPoolSize=8
            operreporting.sender.allowedEventMessageTypes=

            pageinationLimit.max=500
            pageinationLimit.default=300

            pgw.request.logging.enabled=false
            pgw.request.x-forwarded-prefix.append-context-path=true

            mo.identifier.huawei.suffix=

        automationapi:
          serviceMonitorEnabled: true
          jmx:
            enabled: false
          #swaggerBaseUrl: "apim.{{ .Values.ingressSuffix }}/gateway"
          #swaggerTokenUrl: "https://am.{{ .Values.ingressSuffix }}/gateway/chime/oauth/token/"
          enabled: true
          ingress:
            hosts:
              - automationapi.{{ .Values.ingressSuffix }}
            path: /automation
            annotations: 
              haproxy.router.openshift.io/ip_whitelist: "{{ .Values.ipWhitelist }}"
              route.openshift.io/termination: edge
            tls: [] # for openshift

          maxRamPercentageForHeap: '85.0'
          resources:
            requests:
              cpu: 200m
              memory: 500Mi
            limits:
              cpu: 2
              memory: 2Gi
          ##AUTOMATIONAPI PROPERTIES
          env:
            ssp.url: "http://10.72.8.45:8080/cellwize"
            naas.url: "http://10.72.8.39:9091/naas"
            wlm.url: "http://10.72.8.45:9090/wlm"
            provgateway.url: "http://10.72.8.46:9093/pgw"
          properties: |
            ## Swagger Configuration
            springfox.documentation.swagger.v2.path=/api-docs

            # Pagination Configuration
            pageinationLimit.max=500
            pageinationLimit.default=300

            # Service Properties
            service.tasks.operateOnTemplateBasedOnly=false
            k8e.url=http://chime-application-registrar:8081/k8sexecuter/

        application-registrar:
          serviceMonitorEnabled: true
          jmx:
            enabled: false
          enabled: false
          serviceName: k8s-executor
          serviceJarName: k8s-executor
          serviceAccount:
            create: true
          ingress:
            annotations: 
              haproxy.router.openshift.io/ip_whitelist: "{{ .Values.ipWhitelist }}"
              route.openshift.io/termination: edge
            hosts:
              - k8s-executor.{{ .Values.ingressSuffix }}
            path: /k8sexecuter
            tls: [] # for openshift

          image:
            tagGlobalOverride: true
            repository: cellwizeplatform/k8s-executor
            #tag: cdp-77.61
          maxRamPercentageForHeap: '85.0'
          resources:
            requests:
              cpu: 200m
              memory: 500Mi
            limits:
              cpu: 2
              memory: 2Gi
          ##application-registrar PROPERTIES
          properties: |
            server.servlet.contextPath=/k8sexecuter
            logging.level.com.cellwize=DEBUG
            logging.level.com.cellwize.registration=DEBUG
            logging.level.org.springframework=ERROR
            kubernetes.jobs.namespace=chime
            kubernetes.jobs.activeDeadlineSeconds=43200
            #activemq.broker.url=tcp://activemq:61616

        tomcat:
          serviceMonitorEnabled: true
          jmx:
            enabled: false
          enabled: true
          replicaCount: 1
          javaActiveProfiles: "messaging,newDistribution,NAAS,newMOL,newNL"
          maxRamPercentageForHeap: '85.0'
          initContainerHealthcheckEndpoints: []

          resources:
            requests:
              cpu: 1
              memory: 12Gi
            limits:
              cpu: 4
              memory: 24Gi
          ingress:
            hosts:
              - studio.{{ .Values.ingressSuffix }}
            annotations: 
              haproxy.router.openshift.io/ip_whitelist: "{{ .Values.ipWhitelist }}"
              route.openshift.io/termination: edge
            tls: [] # for openshift
        
          shareExtraVolumes:
            - volumeName: "patches"
              shareSubPath: "tomcat/patches"
              podSubPath: "/opt/tomcat/patches/"

          ##TOMCAT PROPERTIES
          properties: |
            tasktrigger.url=http://chime-task-trigger-service:9095/task-trigger
            #-------------------------------------------------------------
            #requested by Nicolai:
            sonstudio.optimization.template.enable=true
            sonstudio.nr.optimization.template.enable=true
            sonstudio.nr.optimization.modules.template=cc5g, rsi5g, anch5g, pci5g
            sonstudio.lte.optimization.template.enable=true
            sonstudio.lte.optimization.modules.template=cc4g, rsi4g, intralte, interlte
            sonstudio.NrAnchoringOptField.allowedFrequencies.lte=675, 700, 775, 925, 975, 1000, 1025, 1050, 1075, 1087, 1125, 2050, 2075, 2100, 2150, 2125, 2225, 2275, 2350, 2435, 2460, 2485, 2560, 2581, 2585, 5230, 5815, 2325, 67186, 3150, 3350, 900, 5255, 9720, 7291, 46890, 47090, 47091, 47290, 47291, 47489, 47490, 47491, 47691, 52740, 52939, 52940, 53139, 53140, 53339, 53340, 56240, 56440, 56640, 66911, 66961, 66986, 67011, 67086, 67186
            sonstudio.NrAnchoringOptField.allowedFrequencies.nr=176500, 177000, 207455, 2071675, 2073339, 2074167, 2075003, 2075833, 2075837, 2076667, 2081667, 2081669, 2083333, 2083337, 2243333, 2244999, 2246665, 2248331, 2257499, 2259999, 2263333, 227166,435000,434910
  
            sonstudio.map.dilution_factor=250

            dao.counters.dbType=vertica
            # kml.polygon.vertica.write=true
            counters.db.type=vertica
            opt.change_events.db.type=vertica

            #opt.events.vertica.write=true
            #opt.events.vertica.read.type=vertica
            #opt.counters.lte.vertica.write=true
            #opt.counters.lte.vertica.read=vertica

            #Rollback
            # sonstudio.rollback.show_events.status=SUCCESS
            # sonstudio.rollback.show_events.prov_mode=OFFLINE
            # sonstudio.rollback.provisioning_mode=OFFLINE_SIMULATION

            #sonstudio.rollback_opt_types.modules.disabled=

            portal.communication.useMessaging=true
            portal.communication.stopMonitoring=true
            dao.networkDao.resultSetStreaming=true

            wlm.timeout=1000
            datasource.centralized=true

            portal.maxInactiveInterval=45
            portal.communication.cc.timeout=10000
            communication.timeout=4800000

            # provisioning.ericsson.bcgtool.searchFolderPath=/opt/raw_data/nifi_sondata/CM/ERICSSON/OSSID_5d40cff088c91d001debadfe_

            pls.enablePolicyService=true
            # naas.enableNetworkModel=false
            jobs.pgw.provisioning=true
            pgw.template.support-features=
            pgw.tasks.support-features=
            sonstudio.pgw.provisioning.modules=

            sonstudio.pgtw.provisioning.modules = cc3g, cc2g, cc4g, cc5g, intralte, interlte
            k8s.endpoint=http://chime-application-registrar:8081/k8sexecuter/
            # sonstudio.cross.optimization.modules=cdp
            aapi.endpoint=http://chime-automationapi:9100/automation/

            # tomcat son.properties sync to onprem
            com.cellwize.ssp.sonstudio.actions.detailstaskaction = admin, eng, viewer
            com.cellwize.ssp.sonstudio.actions.exportjobexeclogsaction = admin, eng, viewer
            com.cellwize.ssp.sonstudio.actions.exportlastreportsaction = admin, eng, viewer
            com.cellwize.ssp.sonstudio.actions.exportprovstreamlogsaction = admin, eng,viewer
            com.cellwize.ssp.sonstudio.actions.exportreportsaction = admin, eng, viewer
            com.cellwize.ssp.sonstudio.actions.logdownloadtaskaction = admin, eng, viewer
            com.cellwize.ssp.sonstudio.actions.logtaskaction = admin, eng, viewer

            counters.isQueryFromUnifiedTable=true

            crossfeeders.calculateMimoDetector=true

            jobs.triggering.cronexp= 0\ 40\ 09,11,13,15,17,21\ ?\ *\ *
            jobs.triggering.dataavailability.cronexp= 0\ */10\ *\ ?\ *\ *
            jobs.triggering.event.cronexp= 0\ 0\ 10,12,14,16,22\ ?\ *\ *
            jobs.triggering.guanr.cronexp= 0\ 0\ 10,12,14,16,22\ ?\ *\ *
            jobs.triggering.lanr.cronexp= 0\ 0\ 10,12,14,16,22\ ?\ *\ *
            jobs.triggering.mlb.cronexp= 0\ 0\ 10,12,14,16,22\ ?\ *\ *
            jobs.triggering.uanr.cronexp= 0\ 0\ 10,12,14,16,22\ ?\ *\ *

            networkservices.co_sectors.delta_azimuth=15.0D
            networkservices.co_sectors.maximum_distance_meters=15.0D

            perf.service.kpiSource.type=xpaas

            pmCounterDefinitions.from.xpaas=true

            portal.autolock.enabled=true
            portal.communication.pickBestServer=true
            portal.maxInactiveInterval = 120
            portal.module.support.roles = admin, eng, viewer

            projectName=XL

            provisioning.cache.operational.mode=db

            sonstudio.ant4g_external_interference_handling.disabled=false
            sonstudio.ant4g_fdd_dense_urban_gap=5
            sonstudio.ant4g_fdd_dense_urban_percentile=95
            sonstudio.ant4g_fdd_rural_gap.value.default=5
            sonstudio.ant4g_fdd_rural_percentile.value.default=95
            sonstudio.ant4g_fdd_sub_urban_gap=5
            sonstudio.ant4g_fdd_sub_urban_percentile=95
            sonstudio.ant4g_fdd_urban_gap=5
            sonstudio.ant4g_fdd_urban_percentile=95
            sonstudio.ant4g_suburban_distance.value.max = 50000
            sonstudio.ant4g_tdd_dense_urban_gap=5
            sonstudio.ant4g_tdd_dense_urban_percentile=95
            sonstudio.ant4g_tdd_rural_gap=5
            sonstudio.ant4g_tdd_rural_percentile=95
            sonstudio.ant4g_tdd_sub_urban_gap=5
            sonstudio.ant4g_tdd_sub_urban_percentile=95
            sonstudio.ant4g_tdd_urban_gap=5
            sonstudio.ant4g_tdd_urban_percentile=95
            sonstudio.ant4g_urban_distance.value.max = 10000

            sonstudio.assessment.allow_serving_cell_weight=true
            sonstudio.assessment.HOURS.values=2,3,4,5,6,12,22,23,24,30,48
            sonstudio.assessment.optimization.modules=ant,ant4g

            sonstudio.bwlistinheritconstraints.enable=true

            sonstudio.cc2g.trigger_condition_short_term_attribute_select.options.selected=
            sonstudio.cc2g.trigger_condition_short_term_attribute_select.options.values=
            sonstudio.cc2g.trigger_short_term_select.enabled=true

            sonstudio.cc.trigger_condition_short_term_attribute_select.unlimited=true

            sonstudio.crossfeeders.show=true

            sonstudio.ganr_nbr_success_rate_threshold_to_delete.value.min=-1

            sonstudio.ifho_geo_impact_weight.value.min = 0.0
            sonstudio.ifho_max_distance_colocation_to_add.value.min = -1
            sonstudio.ifho_max_distance.default = 20000
            sonstudio.ifho_max_distance_for_deletion.default = 10000
            sonstudio.ifho_min_distance_colocation_to_delete.value.min = -1
            sonstudio.ifho_success_rate_threshold.value.min=-1

            sonstudio.inter_lte_ho_success_rate_threshold_for_deletion.value.min=-1
            sonstudio.intra_lte_ho_success_rate_threshold_for_deletion.value.min=-1

            sonstudio.irat2g4g_success_rate_threshold.value.min = -1
            sonstudio.iratlte_ho_success_rate_threshold_for_deletion.value.min = -1
            sonstudio.irat_success_rate_threshold.value.min=-1

            sonstudio.kpitriggering.max_conditions=8
            sonstudio.kpitriggering.max_rules=8

            sonstudio.logsform.context.logerrorpath=/opt/scripts/provisioning_errors_report

            sonstudio.NrAnchoringOptField.band.default.lte=LTE_1800,LTE_2100,LTE_2600,LTE_900,LTE_800,LTE_700
            sonstudio.NrAnchoringOptField.band.default.nr=N3,N14,N28,N48,N77,N78
            sonstudio.NrAnchoringOptField.enableBandBasedStrategy=false

            sonstudio.nr.optimization.modules.disabled=

            sonstudio.optimization.nrrsi.enableTimeDomain=true

            sonstudio.pci_multi_carrier_policy.enabled=false
            sonstudio.pci_opt_adv.enabled=true

            sonstudio.sho_max_distance.default = 20000
            sonstudio.sho_max_distance_for_deletion.default = 10000
            sonstudio.sho_success_rate_threshold.value.min=-1

            sonstudio.tasktype.options.values = CONFIGURATION, STATISTICS_AND_LOGS, MAINTENANCE, FETCHING

            sonstudio.timepair1between.03.value.default = 20:40:00
            sonstudio.timepair1to.03.value.default = 17:59:59
            sonstudio.timepair2between.07.value.default = 00:40:00
            sonstudio.timepair2to.07.value.default = 19:59:59

            sonstudio.togglemap.show=true

            sonstudio.triggering.scheduler.cc2g.options.disabled=EVT_TRIGGERED,DATA_AVAILABILITY_TRIGGERED
            sonstudio.triggering.scheduler.cc3g.options.disabled=EVT_TRIGGERED,DATA_AVAILABILITY_TRIGGERED
            sonstudio.triggering.scheduler.cc4g.options.disabled=EVT_TRIGGERED,DATA_AVAILABILITY_TRIGGERED

            sonstudio.wizard.constraints.togglekpieditorstep=true

            dml.api.url=http://chime-naas:9091/naas/v1


        son:
          enabled: true
          
          tolerations:
            - key: "node-role.kubernetes.io/infra"
              operator: "Exists"
              effect: "NoSchedule"
        
          serviceMonitorEnabled: true
          jmx:
            enabled: false
            config: |
              ssl: false
              lowercaseOutputLabelNames: true
              lowercaseOutputName: true
              rules:
                - pattern: ".*"
        
          ingress:
            hosts:
              - son.{{ .Values.ingressSuffix }}
            path: /
            annotations: 
              route.openshift.io/termination: edge
            tls: [] # for openshoft

          deploymentStrategy: Recreate
          podManagementPolicy: "Parallel"
          deployment:
            type: StatefulSet
          replicaCount: 1
          keda:
            enabled: false
            pollingInterval: 5
            cooldownPeriod: 60
            minReplicaCount: 1
            maxReplicaCount: 4
            advanced:
              horizontalPodAutoscalerConfig:
                behavior:
                  scaleUp:
                    stabilizationWindowSeconds: 30
                    policies:
                    - type: Pods
                      value: 1
                      periodSeconds: 10
            triggers:
              - type: prometheus
                metadata:
                  serverAddress: http://monitor-kube-prometheus-st-prometheus.monitoring:9090
                  metricName: com_cellwize_distributionmanager_currentworkerload
                  query: sum(com_cellwize_distributionmanager_currentworkerload) / sum(com_cellwize_distributionmanager_maxworkerload) * 100

          logs:
            level: "INFO"

          env:
            IMPORT_IMAGE_CONFIG: true
          javaActiveProfiles: "messaging,newDistribution,NAAS,newMOL,newNL -XX:ObjectAlignmentInBytes=16 -XX:+PrintFlagsFinal -XX:-OmitStackTraceInFastThrow -XX:+UseG1GC -XX:+UseStringDeduplication"
          maxRamPercentageForHeap: '80.0'
          sonDeployment: false

          livenessProbe: {}
          readinessProbe: {}
          resources:
            requests:
              cpu: 2
              memory: 20Gi
            limits:
              cpu: 8
              memory: 30Gi

          mountSonRawData: true
          extraVolumes:
            - name: tmpmo
              emptyDir: {}
            - name: tmpjson
              emptyDir: {}
          extraVolumeMounts:
            - name: tmpmo
              mountPath: /opt/tmpmo
            - name: tmpjson
              mountPath: /opt/tmpjson
        
          shareExtraVolumes:
            - volumeName: "classes"
              shareSubPath: "son_server/classes"
              podSubPath: "/opt/son_server/classes"
            - volumeName: "cfgmng"
              shareSubPath: "son_server/conf"
              podSubPath: "/opt/son_server/conf"
            - volumeName: "data"
              shareSubPath: "son_server/data"
              podSubPath: "/opt/son_server/data"
            - volumeName: "provisioning"
              shareSubPath: "son_server/provisioning"
              podSubPath: "/opt/son_server/provisioning"
            - volumeName: "results"
              shareSubPath: "son_server/results"
              podSubPath: "/opt/son_server/results"
            - volumeName: "jobs"
              shareSubPath: "son_server/logs"
              podSubPath: "/opt/son_server/logs/"
            - volumeName: "patches"
              shareSubPath: "son_server/patches"
              podSubPath: "/opt/son_server/patches/"
            - volumeName: "export"
              shareSubPath: "son_server/export"
              podSubPath: "/opt/son_server/export/"

          ##SON PROPERTIES
          properties: |
            #-------------------------------------------------------------
            jobs.net.ericsson.5g.parser.enabled=true
            jobs.net.ericsson.moBasedDataSource=true
            jobs.net.ericsson.mo.based.5g.network.builder.enabled=true
            job.ericson.enm.networks.levels=1,2
            network.load.ericsson.useEnm=true
            jobs.net.samsung.moBasedDataSource=true
            jobs.net.samsung.mo.based.5g.network.builder.enabled=true
            
            jobs.net.huawei.mo.based.5g.network.builder.enabled=true
            jobs.net.huawei.moBasedDataSource=true
  
            samsung.lte.populationnodekey=eutran-cell-fdd-tdd
            samsung.nr.populationnodekey=gutran-du-cell-entries 
            
            mo.storage.mongo.enabled=true
            jobs.net.allowEmptyNetworks=true
            jobs.nrintra.classifyRelationsAsNSA=true
            
            ## Vertica ##
            counters.vertica.driverClassName=com.vertica.jdbc.Driver
            counters.db.type=vertica
            counters.db.supportReliability=true
            counters.vertica.queryInsertMode=COPY_LOCAL
            #counters.vertica.tmpCsvDir=/opt/tmp_csv
            dao.networkDao.store.type=bulkMysql
            #dao.networkDao.store.bulkCsvFilesFolder=/opt/tmp_network
            dao.networkDao.store.bulkCsvFilesFolder=#{systemProperties['java.io.tmpdir']}
            mo.loading.outputDir=/opt/tmp_mo
            vertica.opt.raws.jsonLoaderTempDir=/opt/tmp_json
            tableau.vertica.enable=false
            opt.events.vertica.write=true
            opt.events.vertica.read.type=vertica
            opt.change_events.db.type=vertica
            opt.change_events.write.db_types=vertica
            opt.counters.lte.vertica.write=true
            opt.counters.lte.vertica.read=vertica
            jobs.net.moBasedDataSource.moDaoType=moVerticaDAO
            jobs.net.moBasedDataSource=true
            

            ## Vertica Cluster
            mo.storage.vertica.isClusterMode=false
            #Multiple OSS handling
            jobs.net.ossIdTemplate=.*oss_([a-zA-Z0-9]+).*
            ## MO Support
            mo.storage.batchFetchSize=100000
            mo.loading.deleteDuplicates=false
            mo.loading.runPostProcessors=true
            mo.scopes.retention.period.minutes=60
            mo.loading.children.jobs.checking.period.seconds=20
            mo.loading.includeOssIdToSourceId=true
            mo.loading.deactivateOldScopes=true
            #newNL
            jobs.net.keepExternalReferences=false
            jobs.net.continuous.inactive.controllers.retention.period.hours=72
            network.physical.dataSource=db

            # NaaS support
            naas.timeout=15000
            db.main.mongo.sslEnabled=false
            db.main.mongo.ssl.trustStoreLocation=
            db.main.mongo.ssl.trustStorePassword=
            db.main.mongo.ssl.keyPassword=
            db.main.mongo.ssl.keyStoreLocation=
            db.main.mongo.ssl.keyStorePassword=
            db.main.mongo.ssl.invalidHostNameAllowed=

            ## Distribution ##
            documentRepository.folder=/opt/son_server/data
            communication.timeToLive=25000
            provisioning.cache.operational.mode=db
            documentRepository.useDbStorage=false
            datasource.centralized=true
            distribution.server.maxLoad=120
            jobs.useCachedReports=true

            # Policy Studio support
            pls.enablePolicyService=true
            mo.loading.loadPhysicalData=true
            pls.limitPolicyServiceValues=1000

            #xPaaS
            perf.service.kpiSource.type=xpaas

            #Assessment
            operreporting.sender.enabled=true
            operreporting.sender.allowedBuilderTypes=
            #operreporting.sender.allowedBuilderTypes=PROV_ACTIONS,ASSESSMENT_RECORDS,ASSESSMENT_DECISIONS


            jobs.quartz.propertiesLocation=classpath:com/cellwize/optserver/quartz.properties
            jobs.dumpDebugReports=false

            #Schedule jobs on server startup true/false - default is true
            #jobs.manager.isScheduleJobsOnStartup=false

            #Run startup jobs on server startup true/false - default is true
            #jobs.manager.isRunStartupJobsOnStartup=false

            #Set reference clock: 'system' or adjusted
            jobs.clock.type=system

            #If reference clock is 'adjusted' then set system start time
            jobs.clock.pattern=yyyyMMdd HH:mm:ss
            jobs.clock.startTime=20120415 12:45:10
        
        
            #Mbean server HTML interface port
            mbeanServerHtmlInterfacePort=8099
            mbeanServerHtmlInterfaceHost=0.0.0.0
